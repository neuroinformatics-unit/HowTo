
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Update cookiecutter-generated files with cruft &#8212; HowTo</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=b0449be5" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=6dbb43f8"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'programming/Cookiecutter-cruft';</script>
    <link rel="canonical" href="https://howto.neuroinformatics.dev/programming/Cookiecutter-cruft.html" />
    <link rel="icon" href="../_static/logo_light.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Accessing HTTP servers running on the HPC with port forwarding" href="port-fowarding.html" />
    <link rel="prev" title="Mount ceph storage on Ubuntu temporarily" href="Mount-ceph-ubuntu-temp.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo_light.png" class="logo__image only-light" alt=""/>
    <img src="../_static/logo_dark.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">HowTo</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data_analysis/index.html">
    Data Analysis
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Programming
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../open_science/index.html">
    Open Science
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/HowTo" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../data_analysis/index.html">
    Data Analysis
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Programming
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../open_science/index.html">
    Open Science
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/HowTo" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="SLURM-arguments.html">SLURM arguments primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSH-SWC-cluster.html">Set up SSH for the SWC HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="SSH-vscode.html">SSH into an unmanaged machine using VSCode</a></li>
<li class="toctree-l1"><a class="reference internal" href="vscode-with-slurm-job.html">Using VSCode with interactive SLURM jobs on the SWC HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mount-ceph-ubuntu.html">Mount ceph storage on Ubuntu permanently</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mount-ceph-ubuntu-temp.html">Mount ceph storage on Ubuntu temporarily</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Update cookiecutter-generated files with cruft</a></li>
<li class="toctree-l1"><a class="reference internal" href="port-fowarding.html">Accessing HTTP servers running on the HPC with port forwarding</a></li>
<li class="toctree-l1"><a class="reference internal" href="Troubleshooting.html">Troubleshooting</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Programming</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Update cookiecutter-generated files with cruft</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="update-cookiecutter-generated-files-with-cruft">
<h1>Update cookiecutter-generated files with cruft<a class="headerlink" href="#update-cookiecutter-generated-files-with-cruft" title="Link to this heading">#</a></h1>
<p>Ref: <a class="reference external" href="https://cruft.github.io/cruft/">original docs</a> and <a class="reference external" href="https://github.com/cruft/cruft">github repo</a>.</p>
<section id="setup-cruft-link">
<h2>Setup: <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">link</span></code><a class="headerlink" href="#setup-cruft-link" title="Link to this heading">#</a></h2>
<p>Install: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cruft</span></code>.</p>
<p>If this is your first time using <code class="docutils literal notranslate"><span class="pre">cruft</span></code>, you have to set it up using the <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">link</span></code> command. You have to specify the URL of your cookiecutter on GitHub.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cruft</span> <span class="n">link</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">neuroinformatics</span><span class="o">-</span><span class="n">unit</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">cookiecutter</span>
</pre></div>
</div>
<p>At this point, cruft will ask you the same questions you were asked when you first generated the repo with cookiecutter. Enter the same answers you did before, but make sure to enter “provide later” when it prompts for “github_repository_url”.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Why 🤷🏻‍♀️?</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">I have found that if you enter the correct link to your package’s repo in <code class="docutils literal notranslate"><span class="pre">github_repository_url</span></code> field, the command <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">diff</span></code> fails 🤷🏻‍♀️</p>
</div>
</details><p>After you have answered all cookiecutter’s questions, <code class="docutils literal notranslate"><span class="pre">cruft</span></code> will prompt you to specify the commit hash, i.e. the older version of cookiecutter you had used to generate the repo. For now, we have to do this manually by searching the history. Example commit hash: <code class="docutils literal notranslate"><span class="pre">9daec12bffbc32da6a252605c5e67c90028fefc0</span></code>. We need to do this because <code class="docutils literal notranslate"><span class="pre">cruft</span></code> will compare your repo with the template, and will only update the files that have changed since the commit hash you specify.</p>
<p>After you have entered the commit hash, <code class="docutils literal notranslate"><span class="pre">cruft</span></code> will create a <code class="docutils literal notranslate"><span class="pre">.cruft.json</span></code> file in your repo containing the URL to the cookicutter, the commit hash, and your responses to cookiecutter’s prompts. Please track the changes to this file with git.</p>
</section>
<section id="apply-updates-cruft-diff-cruft-update">
<h2>Apply updates: <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">diff</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code><a class="headerlink" href="#apply-updates-cruft-diff-cruft-update" title="Link to this heading">#</a></h2>
<p>Now that <code class="docutils literal notranslate"><span class="pre">.cruft.json</span></code> exists, we can run <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">diff</span></code> to see the changes between your repo and the template. At this point, you could manually apply the subset of the changes you want.</p>
<p>You can also ask <code class="docutils literal notranslate"><span class="pre">cruft</span></code> to apply the changes for you by running <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code>. You will be prompted to confirm the changes with <code class="docutils literal notranslate"><span class="pre">y</span></code> before they are applied. You can also press <code class="docutils literal notranslate"><span class="pre">v</span></code> to see the changes before confirming.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code> will not delete the files you have added to your repo since its creation. It only cares about the files that were generated by cookiecutter.</p>
<p>It also doesn’t delete the files that have since been removed from the template. You have to do this manually.</p>
</div>
<p>In case <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code> is not able to apply all the changes, it will create a <code class="docutils literal notranslate"><span class="pre">your_file.rej</span></code> file for each conflicting file. Based on these files’ contents you can then apply changes manually. Don’t forget to remove the <code class="docutils literal notranslate"><span class="pre">.rej</span></code> files when you’re done. This is a bit tedious, but it should get easier with more frequent updates.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code> is done, you will notice that the <code class="docutils literal notranslate"><span class="pre">.cruft.json</span></code> file has been updated with the new commit hash of the template. Future updates will be based on this commit hash.</p>
<p><code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">check</span></code> will check if your repo is up to date with the template and just give you a boolean response.</p>
</section>
<section id="commit">
<h2>Commit<a class="headerlink" href="#commit" title="Link to this heading">#</a></h2>
<p>Once you are satisfied, commit the changes to a new branch and open a PR to merge it into <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p>
<p>Now, check if your GitHub actions fail… 🤦🏻‍♀️ If everything is fine, you can merge the PR. 🎉 If not, you will have to fix the errors and repeat the process. 😱</p>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-cruft-link">Setup: <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">link</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apply-updates-cruft-diff-cruft-update">Apply updates: <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">diff</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">cruft</span> <span class="pre">update</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commit">Commit</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.1.3.
<br/>
</p>
<p class="theme-version">
Built with the
<a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
0.16.1.
</p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../_static/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../_static/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../_static/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>